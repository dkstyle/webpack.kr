"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5359],{5359:function(e,a,n){n.r(a),n(3696);var t=n(1445);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s.apply(this,arguments)}function o(e){let{components:a,...n}=e;return(0,t.yg)("wrapper",s({components:a},n),(0,t.yg)("blockquote",null,(0,t.yg)("p",{parentName:"blockquote"},"es6 modules")),(0,t.yg)("blockquote",null,(0,t.yg)("p",{parentName:"blockquote"},"commonjs")),(0,t.yg)("blockquote",null,(0,t.yg)("p",{parentName:"blockquote"},"amd")),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"require-with-expression",parentName:"h2"}),"require with expression",(0,t.yg)("a",{href:"#require-with-expression","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"요청에 표현식이 포함된 경우 컨텍스트가 생성되므로, 컴파일 시간에 ",(0,t.yg)("strong",{parentName:"p"},"정확한")," 모듈을 알 수 없습니다."),(0,t.yg)("p",null,"예를 들어, ",(0,t.yg)("inlineCode",{parentName:"p"},".ejs")," 파일을 포함하는 다음과 같은 폴더 구조가 있습니다."),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-bash",parentName:"pre"},"example_directory\n│\n└───template\n│   │   table.ejs\n│   │   table-row.ejs\n│   │\n│   └───directory\n│       │   another.ejs")),(0,t.yg)("p",null,"다음의 ",(0,t.yg)("inlineCode",{parentName:"p"},"require()")," 호출이 평가될 때"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token function",parentName:"code"},"require"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./template/'")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"+")," name ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"+")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'.ejs'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"Webpack은 ",(0,t.yg)("inlineCode",{parentName:"p"},"require()")," 호출을 구문 분석하고 일부 정보를 추출합니다."),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-code",parentName:"pre"},"Directory: ./template\nRegular expression: /^.*\\.ejs$/\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"컨텍스트 모듈")),(0,t.yg)("p",null,"컨텍스트 모듈이 생성됩니다. 정규 표현식과 일치하는 요청에 필요할 수 있는 ",(0,t.yg)("strong",{parentName:"p"},"해당 디렉터리의 모든 모듈에")," 대한 참조를 포함합니다. 컨텍스트 모듈은 요청을 모듈 id로 변환하는 맵을 포함합니다."),(0,t.yg)("p",null,"맵 예제:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-json",parentName:"pre"},(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.yg)("span",{className:"token property",parentName:"code"},'"./table.ejs"'),(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"42"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token property",parentName:"code"},'"./table-row.ejs"'),(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"43"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token property",parentName:"code"},'"./directory/another.ejs"'),(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"44"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,t.yg)("p",null,"컨텍스트 모듈은 또한 맵에 접근하기 위한 런타임 로직도 포함합니다."),(0,t.yg)("p",null,"이것은 동적으로 요청하는 기능이 지원되지만 모든 모듈이 번들에 포함되는 것을 의미합니다."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"requirecontext",parentName:"h2"}),"require.context",(0,t.yg)("a",{href:"#requirecontext","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"require.context()")," 함수로 자신만의 컨텍스트를 만들 수 있습니다."),(0,t.yg)("p",null,"검색할 디렉터리, 하위 디렉터리를 검색해야 하는지 여부를 나타내는 플래그,\n일치하는 파일의 정규식을 전달할 수 있습니다."),(0,t.yg)("p",null,"Webpack은 빌드 하는 동안 코드에서 ",(0,t.yg)("inlineCode",{parentName:"p"},"require.context()"),"를 구문 분석합니다."),(0,t.yg)("p",null,"구문은 다음과 같습니다."),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"\n  directory",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"useSubdirectories ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"regExp ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/^\\.\\/.*$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"mode ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'sync'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"예:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./test'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"false"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.test\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// test 디렉터리에서 요청이 `.test.js`로 끝나는 파일이 있는 컨텍스트입니다."))),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'../'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.stories\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// 상위 폴더와 그 하위 폴더에서 `.stories.js`로 끝나는 파일이 있는 컨텍스트입니다."))),(0,t.yg)("aside",{className:"warning"},(0,t.yg)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,t.yg)("p",{parentName:"aside"},(0,t.yg)("inlineCode",{parentName:"p"},"require.context"),"에 전달할 인수는 리터럴이어야 합니다!")),(0,t.yg)("h3",null,(0,t.yg)("span",{id:"context-module-api",parentName:"h3"}),"context module API",(0,t.yg)("a",{href:"#context-module-api","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"컨텍스트 모듈은 하나의 인수(요청)를 가지는 함수를 export 합니다."),(0,t.yg)("p",null,"export된 함수는 ",(0,t.yg)("inlineCode",{parentName:"p"},"resolve"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"keys"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"id")," 3가지 속성을 가집니다."),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"resolve"),"는 파싱된 요청의 모듈 id를 반환하는 함수입니다."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"keys"),"는 컨텍스트 모듈이 처리할 수 있는 가능한 모든 요청의 배열을 반환하는 함수입니다.")),(0,t.yg)("p",null,"이것은 디렉터리의 모든 파일을 요청하거나 패턴과 일치시키려는 경우에 유용할 수 있습니다. 예제는 다음과 같습니다."),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"r"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  r",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"keys"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"forEach"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"r",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'../components/'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," cache ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"r"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  r",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"keys"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"forEach"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"key"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"cache",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"["),"key",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"r"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"key",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'../components/'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// 빌드 시 캐시는 모든 필수 모듈로 채워집니다."))),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"id"),"는 컨텍스트 모듈의 모듈 id입니다. 이것은 ",(0,t.yg)("inlineCode",{parentName:"li"},"module.hot.accept"),"에서 유용할 수 있습니다.")))}o.isMDXComponent=!0,a.default=o}}]);