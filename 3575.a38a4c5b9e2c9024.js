"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3575],{3575:function(a,e,n){n.r(e),n(7378);var t=n(2682);function s(){return s=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a},s.apply(this,arguments)}function p(a){let{components:e,...n}=a;return(0,t.kt)("wrapper",s({components:e},n),(0,t.kt)("p",null,(0,t.kt)("a",{href:"https://www.vagrantup.com/",parentName:"p"},"Vagrant를")," 사용하여 가상 머신에서 개발 환경을 실행하는 경우, 가상 머신에서도 webpack을 실행하고 싶을 수 있습니다."),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"configuring-the-project",parentName:"h2"}),"Configuring the Project",(0,t.kt)("a",{href:"#configuring-the-project","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"시작하려면, ",(0,t.kt)("inlineCode",{parentName:"p"},"Vagrantfile"),"에 고정 IP가 있는지 확인하세요."),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-ruby",parentName:"pre"},(0,t.kt)("span",{className:"token constant",parentName:"code"},"Vagrant"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"configure",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token string",parentName:"code"},'"2"'),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"do")," ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"|"),"config",(0,t.kt)("span",{className:"token operator",parentName:"code"},"|"),"\n  config",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"vm",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"network ",(0,t.kt)("span",{className:"token symbol",parentName:"code"},":private_network"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},",")," ip",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},'"10.10.10.61"'),"\n",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"end"))),(0,t.kt)("p",null,"다음으로, 프로젝트에 ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack-cli"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"@webpack-cli/serve"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack-dev-server")," 를 설치하세요."),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,t.kt)("span",{className:"token function",parentName:"code"},"npm")," ",(0,t.kt)("span",{className:"token function",parentName:"code"},"install")," --save-dev webpack webpack-cli @webpack-cli/serve webpack-dev-server")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"webpack.config.js")," 파일이 있는지 확인하세요. 만약 파일이 없다면 다음을 최소한의 예제로 사용해 시작하세요."),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  context",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," __dirname",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  entry",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'./app.js'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("p",null,"그리고 ",(0,t.kt)("inlineCode",{parentName:"p"},"index.html")," 파일을 만듭니다. 스크립트 태그는 번들을 가리켜야 합니다. ",(0,t.kt)("inlineCode",{parentName:"p"},"output.filename"),"이 지정되어 있지 않다면, ",(0,t.kt)("inlineCode",{parentName:"p"},"bundle.js"),"가 됩니다."),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-html",parentName:"pre"},(0,t.kt)("span",{className:"token doctype",parentName:"code"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<!"),(0,t.kt)("span",{className:"token doctype-tag",parentName:"span"},"DOCTYPE")," ",(0,t.kt)("span",{className:"token name",parentName:"span"},"html"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"html"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"head"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n    ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script")," ",(0,t.kt)("span",{className:"token attr-name",parentName:"span"},"src"),(0,t.kt)("span",{className:"token attr-value",parentName:"span"},(0,t.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"/bundle.js",(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"'))," ",(0,t.kt)("span",{className:"token attr-name",parentName:"span"},"charset"),(0,t.kt)("span",{className:"token attr-value",parentName:"span"},(0,t.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"utf-8",(0,t.kt)("span",{className:"token punctuation",parentName:"span"},'"')),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,t.kt)("span",{className:"token script",parentName:"code"}),(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"head"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"body"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n    ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"h2"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"Hey!",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"h2"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n  ",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"body"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,t.kt)("span",{className:"token tag",parentName:"code"},(0,t.kt)("span",{className:"token tag",parentName:"span"},(0,t.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"html"),(0,t.kt)("span",{className:"token punctuation",parentName:"span"},">")))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"app.js")," 파일도 만들어야 합니다."),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"running-the-server",parentName:"h2"}),"Running the Server",(0,t.kt)("a",{href:"#running-the-server","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"이제, 서버를 실행하세요."),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},"webpack serve --host ",(0,t.kt)("span",{className:"token number",parentName:"code"},"0.0"),".0.0 --client-web-socket-url ws://10.10.10.61:8080/ws --watch-options-poll")),(0,t.kt)("p",null,"기본적으로, 서버는 로컬 호스트에서만 접근할 수 있습니다. 호스트 PC에서 접근할 것이므로, 이를 허용하려면 ",(0,t.kt)("inlineCode",{parentName:"p"},"--host"),"를 변경해야 합니다."),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"는 파일이 변경될 때 다시 로드하기 위해 WebSocket에 연결하는 스크립트를 번들에 포함합니다.\n",(0,t.kt)("inlineCode",{parentName:"p"},"--client-web-socket-url")," 플래그는 스크립트가 WebSocket을 찾을 위치를 알고 있는지 확인합니다. 서버는 기본적으로 ",(0,t.kt)("inlineCode",{parentName:"p"},"8080")," 포트를 사용하므로, 여기에서도 지정해야 합니다."),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"--watch-options-poll"),"은 webpack이 파일의 변경을 감지할 수 있도록 합니다. 기본적으로, webpack은 파일 시스템에 의해 트리거되는 이벤트를 수신하지만, VirtualBox에는 이와 관련된 많은 문제가 있습니다."),(0,t.kt)("p",null,"서버는 이제 ",(0,t.kt)("inlineCode",{parentName:"p"},"http://10.10.10.61:8080"),"에서 접근할 수 있습니다. ",(0,t.kt)("inlineCode",{parentName:"p"},"app.js"),"를 변경하면 실시간으로 다시 로드됩니다."),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"advanced-usage-with-nginx",parentName:"h2"}),"Advanced Usage with nginx",(0,t.kt)("a",{href:"#advanced-usage-with-nginx","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"좀 더 생산적인 환경을 모방하기 위해, nginx로 ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"를 프록시 할 수도 있습니다."),(0,t.kt)("p",null,"nginx 설정 파일에 다음을 추가하십시오."),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-nginx",parentName:"pre"},(0,t.kt)("span",{className:"token keyword",parentName:"code"},"server")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"location")," ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"/")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"proxy_pass")," ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"http"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":"),(0,t.kt)("span",{className:"token operator",parentName:"code"},"/"),(0,t.kt)("span",{className:"token operator",parentName:"code"},"/"),(0,t.kt)("span",{className:"token number",parentName:"code"},"127.0"),(0,t.kt)("span",{className:"token number",parentName:"code"},".0"),(0,t.kt)("span",{className:"token number",parentName:"code"},".1"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":"),(0,t.kt)("span",{className:"token number",parentName:"code"},"8080"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"proxy_http_version")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1.1"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"proxy_set_header")," Upgrade ",(0,t.kt)("span",{className:"token variable",parentName:"code"},"$http_upgrade"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"proxy_set_header")," Connection ",(0,t.kt)("span",{className:"token string",parentName:"code"},'"upgrade"'),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"error_page")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"502")," @start",(0,t.kt)("span",{className:"token operator",parentName:"code"},"-"),"webpack",(0,t.kt)("span",{className:"token operator",parentName:"code"},"-"),"dev",(0,t.kt)("span",{className:"token operator",parentName:"code"},"-"),(0,t.kt)("span",{className:"token keyword",parentName:"code"},"server"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n  ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"location")," @start",(0,t.kt)("span",{className:"token operator",parentName:"code"},"-"),"webpack",(0,t.kt)("span",{className:"token operator",parentName:"code"},"-"),"dev",(0,t.kt)("span",{className:"token operator",parentName:"code"},"-"),(0,t.kt)("span",{className:"token keyword",parentName:"code"},"server")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"default_type")," text",(0,t.kt)("span",{className:"token operator",parentName:"code"},"/"),"plain",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"502")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},'"Please start the webpack-dev-server first."'),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"proxy_set_header")," 줄은 WebSocket이 올바르게 작동하도록 허용하기 때문에 중요합니다."),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"를 시작하는 명령을 다음과 같이 변경할 수 있습니다."),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-bash",parentName:"pre"},"webpack serve --client-web-socket-url ws://10.10.10.61:8080/ws --watch-options-poll")),(0,t.kt)("p",null,"이렇게 하면, ",(0,t.kt)("inlineCode",{parentName:"p"},"127.0.0.1"),"에서만 서버에 접근할 수 있으며, nginx가 호스트 PC에서 사용할 수 있도록 처리하므로 괜찮습니다."),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"conclusion",parentName:"h2"}),"Conclusion",(0,t.kt)("a",{href:"#conclusion","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"고정 IP에서 Vagrant box에 접근할 수 있도록 만든 다음, ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"를 공개적으로 접근할 수 있도록 하여 브라우저에서 접근할 수 있도록 했습니다. VirtualBox가 파일 시스템 이벤트를 보내지 않아 서버가 파일 변경 시 다시 로드되지 않는 일반적인 문제를 해결했습니다."))}p.isMDXComponent=!0,e.default=p}}]);